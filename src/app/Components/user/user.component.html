<!-- User List Table -->
<div class="container-fluid">
  <div class="row">
    <div class="col-8">
      <div class="card">
        <div class="card-header bg-primary">
          <div class="row">
            <div class="col-6 text-white">
              <h6 class="p-2">User-list</h6>
            </div>
            <div class="col-6 text-end">
              <button class="btn btn-info">Add User</button>
            </div>
          </div>
        </div>
        <div class="card-body">
          <!-- Search and Filter Inputs -->
          <input type="text" class="form-control mb-2" placeholder="Search by Name" [(ngModel)]="searchName" (ngModelChange)="filterAndSearch()">
          <select class="form-select mb-2" [(ngModel)]="selectedWorkoutType" (ngModelChange)="filterAndSearch()">
            <option value="">Filter by Workout Type</option>
            <option *ngFor="let item of workouttypes" [value]="item">{{ item }}</option>
          </select>

          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Name</th>
                <th>Workouts</th>
                <th>Number of Workouts</th>
                <th>Total Workouts</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of filteredUserList | paginate: { itemsPerPage: itemsPerPage, currentPage: page }; let i = index" (click)="onRowClick(item)">
                <td>{{ item.name }}</td>
                <td>{{ item.workouttypes }}</td>
                <td>{{ item.numberOfWorkouts }}</td>
                <td>{{ item.workoutMinutes }}</td>
              </tr>
            </tbody>
          </table>

          <!-- Pagination Controls -->
          <pagination-controls (pageChange)="page = $event"></pagination-controls>

          <!-- Add Chart -->
          <div style="display: block;">
            <canvas #barChart></canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="col-4">
      <div class="card">
        <div class="card-header bg-primary">
          <div class="row">
            <div class="col-6 text-white">
              <h6 class="p-2">Add User</h6>
            </div>
            <div class="col-6 text-end">
              <button class="btn btn-info" (click)="onResetForm()">RESET</button>
            </div>
          </div>
        </div>
        <div class="card-body">
          <form class="row g-3" #userForm="ngForm" (ngSubmit)="onSubmit(userForm)">
            <div class="mb-3">
              <input type="text" class="form-control" name="name" placeholder="User Name" [(ngModel)]="user.name">
            </div>
            <div class="mb-3">
              <select class="form-select" name="workouttypes" [(ngModel)]="user.workouttypes">
                <option value="">Workout Types</option>
                <option *ngFor="let item of workouttypes" [value]="item">{{ item }}</option>
              </select>
            </div>
            <div class="mb-3">
              <input type="number" class="form-control" name="minutes" placeholder="Workout Minutes" [(ngModel)]="user.workoutMinutes">
            </div>
            <div>
              <button class="btn btn-primary w-100" type="submit">Add Workout</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
